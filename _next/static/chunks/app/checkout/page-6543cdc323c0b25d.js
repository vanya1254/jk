(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{6959:function(t,e,r){Promise.resolve().then(r.bind(r,7472))},7472:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return C}});var a=r(7437),o=r(2265),s=r(6123),n=r(7632),i=r(9608),u=r(9170),c=r(7568);let d=t=>t.order;var l=r(8867),m=r.n(l),p=t=>{let{children:e,className:r}=t;return(0,a.jsxs)("section",{className:"".concat(m().root).concat(r?" ".concat(r):""),children:[(0,a.jsx)("h3",{className:m().root_title,children:"Shipping Information"}),(0,a.jsx)("div",{className:m().root__container,children:e})]})},f=r(2670),h=r(9143),y=r(8685),b=r.n(y),g=t=>{let{onSubmitForm:e}=t,{register:r,handleSubmit:o,formState:{errors:s}}=(0,f.cI)(),i=(0,n.TL)();return(0,a.jsxs)("form",{className:b().root,onSubmit:o(t=>{let r={...t};i((0,c.iO)(r)),e()}),children:[(0,a.jsx)("input",{...r("firstName",{required:!0}),"aria-invalid":s.firstName?"true":"false",type:"firstname",placeholder:"First Name"}),(0,a.jsx)("input",{...r("lastName",{required:!0}),"aria-invalid":s.lastName?"true":"false",type:"lastname",placeholder:"Last Name"}),(0,a.jsx)("input",{...r("phone",{required:!0}),type:"tel",placeholder:"Phone Number"}),(0,a.jsx)("input",{...r("country",{required:!0}),type:"text",placeholder:"Country"}),(0,a.jsx)("input",{...r("address",{required:!0}),type:"text",placeholder:"Address Line"}),(0,a.jsx)("input",{...r("city",{required:!0}),type:"text",placeholder:"City"}),(0,a.jsx)("input",{...r("mail",{required:"Email Address is required"}),"aria-invalid":s.mail?"true":"false",type:"email",placeholder:"Email"}),(0,a.jsx)("input",{...r("postcode",{required:!0}),type:"text",placeholder:"Postcode"}),(0,a.jsx)("div",{className:b().root__submit,children:(0,a.jsx)(h.Z,{className:b().root_submit,text:"Submit",onClick:void 0})})]})},_=r(7907);function C(){let t=(0,_.useRouter)(),e=(0,n.TL)(),{bag:r,summary:l}=(0,n.CG)(i.K),{order:m,status:f}=(0,n.CG)(d);return((0,o.useEffect)(()=>{e((0,c.Ck)(r))},[e,r]),r.length)?(0,a.jsx)("main",{children:(0,a.jsx)(p,{children:(0,a.jsx)(g,{onSubmitForm:()=>{e((0,c.mv)({order:m})),console.log(m),e((0,u.z8)()),e((0,u.yW)()),t.push("/bag"),s.toast.success("Order created! ($".concat((l.total/100).toFixed(2),")"),{position:"top-center",autoClose:3e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!1,progress:void 0,theme:"light"})}})})}):(0,a.jsx)("main",{children:"ERORR"})}},9143:function(t,e,r){"use strict";var a=r(7437);r(2265);var o=r(9699),s=r.n(o);e.Z=t=>{let{onClick:e,className:r,text:o}=t;return(0,a.jsx)("button",{onClick:e,className:"".concat(s().root," ").concat(r),children:o})}},9608:function(t,e,r){"use strict";r.d(e,{K:function(){return a}});let a=t=>t.bag},9170:function(t,e,r){"use strict";r.d(e,{H2:function(){return m},RT:function(){return s},TT:function(){return n},cl:function(){return d},yW:function(){return i},z8:function(){return l}});var a=r(5972),o=r(8038);let s=(0,a.hg)("bag/fetchBag",async()=>{let t=await fetch("https://94bd9fe6fad33179.mokky.dev/bag");return await t.json()}),n=(0,a.hg)("bag/postItem",async t=>{let{item:e}=t;await fetch("https://94bd9fe6fad33179.mokky.dev/bag",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({...e})})}),i=(0,a.hg)("bag/patchBag",async(t,e)=>{let{getState:r}=e,{bag:a}=r();await fetch("https://94bd9fe6fad33179.mokky.dev/bag",{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a.bag)})}),u={bag:[],summary:{total:0,subtotal:0,shipping:0},status:o.q.PENDING},c=(0,a.oM)({name:"bag",initialState:u,reducers:{removeItem(t,e){let r=t.bag.findIndex(t=>t.id===e.payload.id&&t.size===e.payload.size);t.bag.splice(r,1)},clearBag(t){t.bag=[]},getSummary(t){t.summary.subtotal=t.bag.reduce((t,e)=>t+e.priceCents,0),t.summary.shipping=t.summary.subtotal>1e4?0:3500,t.summary.total=t.summary.subtotal+t.summary.shipping}},extraReducers:t=>{t.addCase(s.pending,t=>{t.status=o.q.PENDING}).addCase(s.fulfilled,(t,e)=>{t.bag=e.payload,t.status=o.q.FULFILLED,t.status===o.q.FULFILLED&&(t.summary.subtotal=t.bag.reduce((t,e)=>t+e.priceCents,0),t.summary.shipping=t.summary.subtotal>1e4?0:3500,t.summary.total=t.summary.subtotal+t.summary.shipping)}).addCase(s.rejected,t=>{t.bag=u.bag,t.status=o.q.REJECTED})}}),{removeItem:d,clearBag:l,getSummary:m}=c.actions;e.ZP=c.reducer},7568:function(t,e,r){"use strict";r.d(e,{Ck:function(){return u},iO:function(){return c},mv:function(){return s}});var a=r(5972),o=r(8038);let s=(0,a.hg)("order/postOrder",async t=>{let{order:e}=t;await fetch("https://94bd9fe6fad33179.mokky.dev/orders",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})}),n={order:{bag:[],form:{address:"",city:"",country:"",firstName:"",lastName:"",mail:"",phone:"",postcode:""}},status:o.q.PENDING},i=(0,a.oM)({name:"order",initialState:n,reducers:{setBag(t,e){t.order.bag=e.payload},setForm(t,e){t.order.form=e.payload}},extraReducers:t=>{t.addCase(s.pending,t=>{t.status=o.q.PENDING}).addCase(s.fulfilled,t=>{t.status=o.q.FULFILLED}).addCase(s.rejected,t=>{t.order=n.order,t.status=o.q.REJECTED})}}),{setBag:u,setForm:c}=i.actions;e.ZP=i.reducer},7632:function(t,e,r){"use strict";r.d(e,{CG:function(){return s},TL:function(){return o}});var a=r(828);let o=a.I0.withTypes(),s=a.v9.withTypes();a.oR.withTypes()},8038:function(t,e,r){"use strict";var a,o;r.d(e,{q:function(){return a}}),(o=a||(a={})).PENDING="pending",o.FULFILLED="fulfilled",o.REJECTED="rejected"},9699:function(t){t.exports={root:"ButtonCustom_root__ttFwm"}},8685:function(t){t.exports={root:"FormCustom_root__wEr8s",root__submit:"FormCustom_root__submit__vYY3v",root_submit:"FormCustom_root_submit__RNh_1"}},8867:function(t){t.exports={root:"CheckoutLayout_root__SRDPK",root_title:"CheckoutLayout_root_title__TZZTx",root__container:"CheckoutLayout_root__container___GiSG"}}},function(t){t.O(0,[691,670,971,69,744],function(){return t(t.s=6959)}),_N_E=t.O()}]);